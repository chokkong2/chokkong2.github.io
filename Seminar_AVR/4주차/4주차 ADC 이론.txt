ADCSRA 레지스터   (A/D 컨버터 제어 및 상태 레지스터 A : ADC Control and Status Register A)
7번 비트 : ADEN (ADC Enable)을 1로 설정하면 A/D 컨버터의 모든 동작이 허용됨
             0으로 설정하면 모든 동작이 금지되며 소비전력을 절감할 수 있음
6번 비트 : ADSC (ADC Start Conversion) 를 1로 설정하면 A/D 컨버터의 변환이 시작됨
             프리 런닝 모드에서는 1로 설정됬을 때 첫번재 변환이 시작되고 그 다음부터는 자동
5번 비트 : ADFR (ADC Free Running Select)은 설정하면 프리 런닝 모드로 설정됨
4번 비트 : ADIF (ADC Interrupt Flag)는 A/D 변환이 완료되서 A/D 컨버터 데이터 레지스터의 값이
             갱신되고 나면 1로 셋되면서 변환완료 인터럽트를 요청함
             인터럽트가 처리되기 시작하면 이 플랙 비트는 다시 0으로 자동 클리어됨
             변환이 완료되었는지 확인할 때 이 비트를 사용하면 됨
3번 비트 : ADIE (ADC Interrupt Enable) 를 1로 설정하면 A/D 변환완료 인터럽트를 개별적으로
             허용함. 당연히 SREG의 i 비트가 1로 설정되어 있어야함
2~0번 비트 : ADPS2~0 (ADC Prescaler Select Bit)
                AVR의 ADC는 아날로그 신호를 디지털 신호로 변환시 일정한 간격을 갖도록해서
                변환하는데 이를 결정하는 것이 클록 주파수임.
                단극성 입력을 사용하는 경우 50kHz~1000kHz,
                차동입력을 사용하는 경우 50kHz~200kH의 클록을 사용해야함.
                그런데 크리스탈의 주파수가 16MHz라서 prescaler값을 이용해 필요한 주파수를 얻어야됨
                그때 필요한 prescaler 값을 2~0번 비트를 통해 설정할수 있음
                **** prescaler는 ADEN 비트를 1로 설정한 경우에만 동작함 ****




ADMUX 레지스터    (A/D 컨버터 멀티플렉서 선택 레지스터 : ADC Multiplexer Selection Register)
7,6번 비트 : REFS1~0 (Reference Selection Bit) 을 통해 밑의 설명과 같이 A/D 컨버터에서 사용하는 기준전압을 설정함
1. 외부에서 기준 전압을 공급해주는 것 (AREF 단자로 입력된 전압을 사용)
2. AVCC 핀으로부터 공급되는 전압을 사용
3. 사용하지 않음
4. 내부의 기준전압 2.56V 사용

5번 비트 : ADLAR (ADC Left Adjust Result) 을 1로 설정하면 변환 결과가 A/D 컨버터 데이터 레지스터에 저장될 때
             좌측으로 끝을 맞추어 저장됨.  0으로 설정하면 우측으로 끝을 맞추어 저장.
4~0번 비트 : MUX4~0 (Analog Channel and Gain Selection Bit) 
                 A/D 컨버터의 아날로그 입력 채널을 선택함
                 아날로그 입력은 8가지의 단극성 입력과 22가지의 차동입력으로 구분됨
                 22개의 차동입력은 다시 4가지의 경우로 나눌 수 있음
                 


ADCH, ADCL 레지스터   (A/D 컨버터 데이터 레지스터 : ADC Data Register)
단극성 입력을 사용하는 경우 A/D 변환 결과가 10비트 양의 정수로 표시되어 0~1023의 범위를 가짐
차동입력을 사용하는 경우 A/D 변환 결과가 10비트 2의 보수로 표현되어 -512~511의 범위를 가짐
읽을 때 ADCL 먼저, 쓸때는 ADCH 먼저





ADC 기준 전압이라는 것은 10비트 최대값인 1023에 해당하는 값이다. 그러면 내부 Ref 2.56V를 기준 전압으로 설정한다면 하나의 값당 2.56V/1024으로 값이 나타나게 된다. 2.56/1024 = 약 2.5mV에 해당되는 전압으로 이 경우 ADC의 분해능은 AVCC보다는 좀 더 정밀한 값이 된다.

만약 ADC 포트로 입력되는 신호의 전압이 2.5V를 넘지 않는 시스템이고, 정밀하게 잴 필요가 있다면 AVCC보다는 내부 2.56V를 선택하는 것이 좋은 방법이다.

만일 5V가 넘고 센서 값 하나의 변화당 4.8mV보다 작은 민감한 시스템이라면 좀 더 해상도가 높은 ADC를 외부에서 연결하는 것이 옳은 방법이다 








